##### PREFIX #####

# Switch prefix from Ctrl+b → Ctrl+a (much easier to press)
unbind C-b
set -g prefix C-a
bind C-a send-prefix

# Allow C-w to accept second param
set -g prefix2 C-w

##### PERFORMANCE #####

# Remove ESC delay (huge improvement for Vim users)
set -s escape-time 0

# Better key handling
set -g xterm-keys on


##### MOUSE #####

# Enable mouse support (pane resize, selection, window switching)
set -g mouse on


##### VIM-STYLE NAVIGATION #####

# Move between panes WITHOUT prefix
bind -n C-j select-pane -L
bind -n C-k select-pane -D
bind -n C-l select-pane -U
bind -n C-\; select-pane -R


##### C-w WINDOW MANAGEMENT (via prefix2) #####

# C-w s / C-w S — split panes in current directory
bind s split-window -h -c "#{pane_current_path}"
bind S split-window -v -c "#{pane_current_path}"

# C-w f — toggle fullscreen zoom
bind f resize-pane -Z

# C-w c — new window (tab)
bind c new-window -c "#{pane_current_path}"

# C-w q — kill pane
bind q kill-pane

unbind '"'
unbind %

##### TAB (WINDOW) SWITCHING #####

# Alt+t — new window (tab)
bind -n M-t new-window -c "#{pane_current_path}"

# Alt+[ / Alt+] — previous/next window
bind -n M-[ previous-window
bind -n M-] next-window

# Caps Lock + jkl; — pane switching (via Karabiner → Alt+Shift)
bind -n M-J select-pane -L
bind -n M-K select-pane -D
bind -n M-L select-pane -U
bind -n M-: select-pane -R

##### FAST PANE RESIZING #####

# Resize panes using Shift + jkl;
bind -n S-J resize-pane -L 5
bind -n S-K resize-pane -D 5
bind -n S-L resize-pane -U 5
bind -n S-\: resize-pane -R 5

##### COPY MODE (Vim-like) #####

setw -g mode-keys vi


##### APPEARANCE #####

# True color support
set -g default-terminal "tmux-256color"
set -ag terminal-overrides ",xterm-256color:RGB"

# Status bar position
set -g status-position top
set -g status-interval 5

# Catppuccin Mocha palette
set -g status-style "bg=#1e1e2e,fg=#cdd6f4"
set -g status-left "#[bg=#89b4fa,fg=#1e1e2e,bold]  #S #[bg=#1e1e2e,fg=#89b4fa]"
set -g status-left-length 30
set -g status-right "#[fg=#45475a]#[bg=#45475a,fg=#cdd6f4]  %H:%M #[fg=#89b4fa]#[bg=#89b4fa,fg=#1e1e2e,bold]  %b %d "
set -g status-right-length 40

# Window tabs
set -g window-status-format "#[fg=#1e1e2e,bg=#313244]#[fg=#a6adc8,bg=#313244] #I #W #[fg=#313244,bg=#1e1e2e]"
set -g window-status-current-format "#[fg=#1e1e2e,bg=#f38ba8]#[fg=#1e1e2e,bg=#f38ba8,bold] #I #W #[fg=#f38ba8,bg=#1e1e2e]"
set -g window-status-separator " "

# Pane borders
set -g pane-border-style "fg=#313244"
set -g pane-active-border-style "fg=#89b4fa"

# Message style
set -g message-style "bg=#313244,fg=#cdd6f4"

# Scrollback
set -g history-limit 10000
